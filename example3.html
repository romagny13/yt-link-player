<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>YouTube Link Player Demo</title>
    <style>
      /* Base styles */
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        background: #f5f5f5;
      }

      h1,
      h2 {
        color: #2c3e50;
      }

      /* Demo sections */
      .demo-section {
        background: white;
        padding: 20px;
        border-radius: 8px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      /* Controls */
      .controls {
        margin: 20px 0;
        padding: 15px;
        background: #eef2f7;
        border-radius: 6px;
      }

      button {
        background: #3498db;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 4px;
        cursor: pointer;
        margin: 0 8px 8px 0;
        transition: background 0.3s;
      }

      button:hover {
        background: #2980b9;
      }

      /* Video wrapper styles - Enhanced version */
      .video-wrapper {
        height: 0;
        overflow: hidden;
        padding-bottom: 0;
        position: relative;
        opacity: 0;
        transform: translateY(-20px);
        transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .video-wrapper.visible {
        height: auto;
        opacity: 1;
        transform: translateY(0);
        padding-bottom: 56.25%; /* 16:9 aspect ratio */
        margin: 20px 0;
      }


      /* Video container styles */
      .video-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      .video-container iframe {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border: 0;
        border-radius: 4px;
      }

      /* Links styling */
      a {
        color: #3498db;
        text-decoration: none;
        margin-right: 15px;
      }

      a:hover {
        text-decoration: underline;
      }

      /* Code block */
      pre {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 4px;
        overflow-x: auto;
      }

      /* Status messages */
      .status {
        padding: 10px;
        margin: 10px 0;
        border-radius: 4px;
        background: #e1f5fe;
      }
    </style>
  </head>
  <body>
    <h1>YouTube Link Player Demo</h1>
    <div class="status" id="status"></div>

    <div class="demo-section">
      <h2>1. Vidéos Individuelles</h2>
      <p>Cliquez sur un lien pour afficher/masquer la vidéo :</p>
      <a href="https://www.youtube.com/watch?v=jJ1Npb1y4ZE" data-yt-link
        >Vidéo 1</a
      >
      <a href="https://www.youtube.com/watch?v=BFMDUokVCRs" data-yt-link
        >Vidéo 2</a
      >
    </div>

    <div class="demo-section">
      <h2>2. Groupe de Vidéos</h2>
      <p>Une seule vidéo du groupe peut être affichée à la fois :</p>
      <div id="group1-container">
        <a
          href="https://www.youtube.com/watch?v=8QLtyKiu4nk"
          data-yt-link
          data-yt-target="group1"
          >Vidéo 1</a
        >
        <a
          href="https://www.youtube.com/watch?v=kjN90rhTqJk"
          data-yt-link
          data-yt-target="group1"
          >Vidéo 2</a
        >
      </div>
      <div id="group1"></div>
    </div>

    <div class="demo-section">
      <h2>3. Contrôles Globaux</h2>
      <div class="controls">
        <button onclick="player.showAllVideos()">
          Afficher Toutes les Vidéos
        </button>
        <button onclick="player.hideAllVideos()">
          Masquer Toutes les Vidéos
        </button>
        <button onclick="player.destroy()">Détruire le Player</button>
      </div>
    </div>

    <script src="/src/yt-link-player.js"></script>
    <script>
      function updateStatus(message, type = "info") {
        const status = document.getElementById("status");
        status.textContent = message;
        status.style.background = type === "error" ? "#ffebee" : "#e1f5fe";
      }

      const player = new YouTubeLinkPlayer({
        autoPlayOnShow: true,
        mute: true,
        onVideoShow: (container, link, videoId, group = null) => {
          updateStatus(
            `Vidéo ${videoId} affichée${
              group ? ` dans le groupe ${group.id}` : ""
            }`
          );
        },
        onVideoHide: (container, link, videoId, group = null) => {
          updateStatus(
            `Vidéo ${videoId} masquée${
              group ? ` dans le groupe ${group.id}` : ""
            }`
          );
        },
        onError: (error, link) => {
          updateStatus(`Erreur: ${error}`, "error");
        },
      });
    </script>
  </body>
</html>
